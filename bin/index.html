<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>数联寻英人力资源可视分析平台</title>
  <meta name="description" content="app, web app, responsive, responsive layout, admin, admin panel, admin dashboard, flat, flat ui, ui kit, AngularJS, ui route, charts, widgets, components" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />
  <link rel="stylesheet" href="../css/animate.css" type="text/css" />
  <link rel="stylesheet" href="../css/font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="../css/simple-line-icons.css" type="text/css" />
  <link rel="stylesheet" href="../css/font.css" type="text/css" />
  <link rel="stylesheet" href="../css/app.css" type="text/css" />
  <link rel="stylesheet" href="../css/public.css" type="text/css" />

</head>
<body>
<div class="app app-header-fixed" id="app">
  <!-- navbar -->
  <div class="app-header navbar">
    <!-- navbar header -->
    <div class="navbar-header bg-dark">
      <button class="pull-right visible-xs dk" data-toggle="class:show" data-target=".navbar-collapse">
        <i class="glyphicon glyphicon-cog"></i>
      </button>
      <button class="pull-right visible-xs" data-toggle="class:off-screen" data-target=".app-aside" ui-scroll="app">
        <i class="glyphicon glyphicon-align-justify"></i>
      </button>
      <!-- brand -->
      <a href="#/" class="navbar-brand text-lt">
        <i class="fa fa-header"></i>
        <img src="../img/logo2.png" alt="." class="hide">
        <span class="hidden-folded m-l-xs">Hire</span>
      </a>
      <!-- / brand -->
    </div>
    <!-- / navbar header -->

    <!-- navbar collapse -->
    <div class="collapse pos-rlt navbar-collapse box-shadow bg-white-only">
      <!-- buttons -->
      <div class="nav navbar-nav hidden-xs">
        <a href="#" class="btn no-shadow navbar-btn" data-toggle="class:app-aside-folded" data-target=".app">
          <i class="fa fa-dedent fa-fw text"></i>
          <i class="fa fa-indent fa-fw text-active"></i>
        </a>
      </div>
      <!-- / buttons -->


      <!-- nabar right -->
      <ul class="nav navbar-nav navbar-right">
        <ul class="nav navbar-nav navbar-right">

          <!-- -----------------------------------------------------time selector -->
          <form class="navbar-form navbar-form-sm navbar-left shift" ui-shift="prependTo" style="border: 0px; padding: 0px; margin-bottom: 0px" data-target=".navbar-collapse" ng-controller="TypeaheadDemoCtrl">
            <div class="form-group">
              <div class="input-group" style=" line-height: 26px; display:inline">
                <div id="public_time_select">
                <div id="date-start" class="input-group date form_date" data-date="2015-09-22" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                  <input class="form-control" size="14" type="text" value="2015-09-22" style="height: 28px; width:100px">
                  <span class="input-group-addon bg-light btn-sm" ><span class="glyphicon glyphicon glyphicon-time" style=" font-size: 10px"></span></span>
                </div>
                <input type="hidden" id="dtp_input2" value="" />
                -
                <div id="date-end" class="input-group date form_date" data-date="2015-11-12" data-date-format="yyyy-mm-dd" data-link-field="dtp_input3" data-link-format="yyyy-mm-dd">
                  <input class="form-control" size="14" type="text" value="2015-11-12" style="height: 28px; width:100px">
                  <span class="input-group-addon bg-light btn-sm" ><span class="glyphicon glyphicon glyphicon-time" style=" font-size: 10px"></span></span>
                </div>
                <input type="hidden" id="dtp_input3" value="" />
              </div>
              </div>
            </div>
          </form>
          <!-- -----------------------------------------------------user information -->
          <li class="dropdown">
            <a href="#" data-toggle="dropdown" class="dropdown-toggle clear">
              <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
                <img src="../img/a0.jpg" alt="...">
                <i class="on md b-white bottom"></i>
              </span>
              <span id="u_username" class="hidden-sm hidden-md"></span> <b class="caret"></b>
            </a>
            <ul class="dropdown-menu animated fadeInRight w">
              <li><a ui-sref="access.docs">用户： <span id="u_nickname"></span></a></li>
              <li class="divider"></li>
              <li>
                <a ui-sref="app.docs"><span id="u_level" class="label bg-info pull-right">lv 2</span>权限： <span id="u_lvname"></span></a>
              </li>
              <li class="divider"></li>
              <li onclick="signin()"><a ui-sref="" >退出</a></li>
            </ul>
          </li>
          <!-- End user information -----------------------------------------------------  -->

      </ul>
    </ul>
    <!-- End nabar right -->

    </div>
    <!-- / navbar collapse -->
  </div>
  <!-- / navbar -->

  <!-- menu -->
  <div class="app-aside hidden-xs bg-dark">
    <div class="aside-wrap">
      <div class="navi-wrap">

        <!-- nav -->
        <nav ui-nav class="navi">
          <ul class="nav">
            <li id="bar-human" class="hidden-folded padder m-t m-b-sm text-muted text-xs">
              <span translate="aside.nav.HEADER">数据分析</span>
            </li>

            <script id="tm_menu1" type="text/html">
              <% menu.forEach(function(d, i){ %>
              <li id="<%= d.id %>">
                <a href class="auto">
					  <span class="pull-right text-muted">
						<i class="fa fa-fw fa-angle-right text"></i>
						<i class="fa fa-fw fa-angle-down text-active"></i>
					  </span>
                  <i class="glyphicon icon glyphicon-<%= d.icon %>"></i>
                  <span class="font-bold"><%= d.name %></span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header"><a href><span><%= d.name %></span></a></li>
                  <% d.chlidren.forEach(function(c){ %>
                  <li ui-sref-active="active">
                    <a ui-sref="apps.contact" href="#" title="<%= c.url %>" onclick="goHref(this);">
                      <span><%= c.name %></span>
                    </a>
                  </li>
                  <% }); %>
                </ul>
              </li>
              <% }); %>
            </script>

            <li class="line dk"></li>

            <li id="bar-data" class="hidden-folded padder m-t m-b-sm text-muted text-xs">
              <span translate="aside.nav.components.COMPONENTS">数据管理</span>
            </li>

            <li class="line dk hidden-folded"></li>


          </ul>
        </nav>
        <!-- nav -->

        <!-- aside footer -->
        <div class="wrapper m-t">
          <div class="text-center-folded">
            <span class="pull-right pull-none-folded">60%</span>
            <span class="hidden-folded font-12" translate="aside.MILESTONE">数据完整度</span>
          </div>
          <div class="progress progress-xxs m-t-sm dk">
            <div class="progress-bar progress-bar-info" style="width: 60%;">
            </div>
          </div>
          <div class="text-center-folded">
            <span class="pull-right pull-none-folded">35%</span>
            <span class="hidden-folded" translate="aside.RELEASE">Release</span>
          </div>
          <div class="progress progress-xxs m-t-sm dk">
            <div class="progress-bar progress-bar-primary" style="width: 35%;">
            </div>
          </div>
        </div>
        <!-- / aside footer -->
      </div>
    </div>
  </div>
  <!-- / menu -->

  <!-- content -->

  <div id="frame1" class="app-content m-a" style="padding-right: 10px">
    <!-- head end here -->


    <!-- tail start here -->
  </div>
  <!-- /content -->


  <!-- / aside right -->

  <!-- footer -->
  <div class="app-footer wrapper b-t bg-light">
    <span class="pull-right">1.0.0 <a href="#app" class="m-l-sm text-muted"><i class="fa fa-long-arrow-up"></i></a></span>
    &copy; 2014 Copyright. More Products <a href="http://www.shulianxunying.com/" target="_blank" title="官方网站">Hire Big Data</a> - Collect from <a href="#/" title="网页模板" target="_blank"> 数联寻英.</a>
  </div>
  <!-- / footer -->

</div>
<input id="main_url" type="text" style="display:none" />
<!-- jQuery -->
<script src="../js/jquery.min.js"></script>
<script src="../js/ejs.js"></script>
<script src="../js/public.js"></script>
<script src="../js/networky.js"></script>
<script type="text/javascript" src="../js/bootstrap-datetimepicker.min.js" charset="UTF-8"></script>
<script type="text/javascript" src="../js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>

<script type="text/javascript">
  "use strict";
  //window.onresize = function () { location.reload(); }
  var __limit = {'setting-time':1};
  checkLogin();

  function signin(){
    delCookie('username');
    delCookie('nickname');
    delCookie('level');
    window.location.href="login.html";
  }
  function loadMain(){
    var target = getQueryString("key") || "staff-flow";
    var human=["staff-flow", "staff-clock", "staff-time", "staff-people"];
    if(human.indexOf(target)!=-1)$("#p_human").toggleClass('active');
    $.ajaxSetup({ cache:false });
    $.ajaxSetup({ async: false });
    $("<div></div>").load(target + ".html", function(){
      $("#frame1").html("");
      $("#frame1").html(this.innerHTML.match(/<xmp>([\s\S]*?)<\/xmp>/)[1]);
    });
  }

  function goHref(obj){
    var target = (obj != undefined && obj.title != "") ? obj.title : "staff-flow";
    var url= window.location.href;
    url = url.substring(0, url.lastIndexOf('.html') + 5);
    if(!checkPower() && (target in __limit)){
      alert('提示：当前登录账户没有权限访问该页面，请联系管理员！');
      return;
    }
    window.location.href = url + "?key=" + target;
  }

  function checkPower(){
    var level = getCookie('level');
    return (level>1) ? false : true;
  }

  +function ($) {
    $(function(){
      var menus = [{ name:"员工行为分析", icon:'user text-info-dker', id:'p_human', chlidren:[
        {name:'办公流动分析', url:'staff-flow'}, {name:'出差流动分析', url:'staff-trip'},
        {name:'打卡异常分析', url:'staff-card'}, {name:'代打卡分析', url:'staff-interval'},
        {name:'工作时间分布', url:'staff-time'},
        {name:'员工关系分析', url:'staff-people'}
      ]},
        {name:"绩效分析", icon:'time text-success', chlidren:[
          {name:'绩效配置', url:'performance-calc'},
          {name:'绩效计算', url:'performance-view'},
          {name:'绩效设置', url:'performance-setting'},
          {name:'暂未开放', url:'performance-calc'}
        ]},
        /*
        {name:"组织结构分析", icon:'credit-card text-primary', chlidren:[
          {name:'暂未开放', url:''}
        ]},
        */
      ];
      var datas = [{name:"系统设置", icon:'wrench text-success', id:'p_data', chlidren:[
        {name:'网络访问自定义', url:'setting-time'},
        {name:'一般设置', url:'setting-time'}
      ]}];

      var tm_menu = $("#tm_menu1").html();
      $("#bar-human").after(ejs.render(tm_menu, { menu: menus }));
      $("#bar-data").after(ejs.render(tm_menu, { menu: datas }));

      //------------------------------------------------------------------------
      $(document).on('click', '[data-toggle^="class"]', function(e){
        e && e.preventDefault();
        var $this = $(e.target), $class , $target, $tmp, $classes, $targets;
        !$this.data('toggle') && ($this = $this.closest('[data-toggle^="class"]'));
        $class = $this.data()['toggle'];
        $target = $this.data('target') || $this.attr('href');
        $class && ($tmp = $class.split(':')[1]) && ($classes = $tmp.split(','));
        $target && ($targets = $target.split(','));
        $classes && $classes.length && $.each($targets, function( index, value ) {
          if ( $classes[index].indexOf( '*' ) !== -1 ) {
            var patt = new RegExp( '\\s' +
                    $classes[index].
                    replace( /\*/g, '[A-Za-z0-9-_]+' ).
                    split( ' ' ).
                    join( '\\s|\\s' ) +
                    '\\s', 'g' );
            $($this).each( function ( i, it ) {
              var cn = ' ' + it.className + ' ';
              while ( patt.test( cn ) ) {
                cn = cn.replace( patt, ' ' );
              }
              it.className = $.trim( cn );
            });
          }
          ($targets[index] !='#') && $($targets[index]).toggleClass($classes[index]) || $this.toggleClass($classes[index]);
        });
        $this.toggleClass('active');
      });
      // collapse nav
      $(document).on('click', 'nav a', function (e) {
        var $this = $(e.target), $active;
        $this.is('a') || ($this = $this.closest('a'));

        $active = $this.parent().siblings( ".active" );
        $active && $active.toggleClass('active').find('> ul:visible').slideUp(200);

        ($this.parent().hasClass('active') && $this.next().slideUp(200)) || $this.next().slideDown(200);
        $this.parent().toggleClass('active');

        $this.next().is('ul') && e.preventDefault();

        setTimeout(function(){ $(document).trigger('updateNav'); }, 300);
      });

      loadMain();
    });

    //setFrame();


  }(jQuery);
  //$(window).resize(function(){ setFrame(); });
  function setFrame(){ $("#fm-main").height(1000 - 158); };
  //document.documentElement.clientHeight


</script>

</body>
</html>